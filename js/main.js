$(function(){

  /*=================================================
  繝上Φ繝舌�繧ｬ窶輔Γ繝九Η繝ｼ
  ===================================================*/
  // 繝上Φ繝舌�繧ｬ繝ｼ繝｡繝九Η繝ｼ繧偵け繝ｪ繝�け縺励◆譎�
  $('.hamburger').on('click', function() {
    // 繝上Φ繝舌�繧ｬ繝ｼ繝｡繝九Η繝ｼ縺ｮ蜈ｱ騾壼�逅�ｒ蜻ｼ縺ｳ蜃ｺ縺�
    hamburger();
  });
  // 繝｡繝九Η繝ｼ縺ｮ繝ｪ繝ｳ繧ｯ繧偵け繝ｪ繝�け縺励◆譎�
  $('#navi a').on('click', function() {
    // 繝上Φ繝舌�繧ｬ繝ｼ繝｡繝九Η繝ｼ縺ｮ蜈ｱ騾壼�逅�ｒ蜻ｼ縺ｳ蜃ｺ縺�
    hamburger();
  });

  /*=================================================
  繧ｹ繝�繝ｼ繧ｹ繧ｹ繧ｯ繝ｭ繝ｼ繝ｫ
  ===================================================*/
  // 繝壹�繧ｸ蜀�Μ繝ｳ繧ｯ縺ｮ繧､繝吶Φ繝�
  $('a[href^="#"]').click(function(){
    // 繝ｪ繝ｳ繧ｯ繧貞叙蠕�
    let href= $(this).attr("href");
    // 繧ｸ繝｣繝ｳ繝怜�縺ｮid蜷阪ｒ繧ｻ繝�ヨ
    let target = $(href == "#" || href == "" ? 'html' : href);
    // 繝医ャ繝励°繧峨ず繝｣繝ｳ繝怜�縺ｮ隕∫ｴ�縺ｾ縺ｧ縺ｮ霍晞屬繧貞叙蠕�
    let position = target.offset().top;
    // animate縺ｧ繧ｹ繝�繝ｼ繧ｹ繧ｹ繧ｯ繝ｭ繝ｼ繝ｫ繧定｡後≧
    // 600縺ｯ繧ｹ繧ｯ繝ｭ繝ｼ繝ｫ騾溷ｺｦ縺ｧ蜊倅ｽ阪�繝溘Μ遘�
    $("html, body").animate({scrollTop:position}, 600, "swing");
    return false;
  });

  /*=================================================
  繝輔ぉ繝ｼ繝芽｡ｨ遉ｺ
  ===================================================*/
  $(".inview").on("inview", function (event, isInView) {
    if (isInView) {
      // 隕∫ｴ���inview繧ｯ繝ｩ繧ｹ�峨′陦ｨ遉ｺ縺輔ｌ縺溘ｉshow繧ｯ繝ｩ繧ｹ繧定ｿｽ蜉�縺吶ｋ
      $(this).stop().addClass("show");
    }
  });

  /*=================================================
  繧ｹ繧ｯ繝ｭ繝ｼ繝ｫ譎ゅ�繧､繝吶Φ繝�
  ===================================================*/
  $(window).scroll(function() {
    // 繧ｹ繧ｯ繝ｭ繝ｼ繝ｫ菴咲ｽｮ繧貞叙蠕�
    let scroll = $(window).scrollTop();

    /*=================================================
    繝｡繧､繝ｳ繝薙ず繝･繧｢繝ｫ縺ｮ諡｡螟ｧ繝ｻ邵ｮ蟆�
    ===================================================*/
    mv_scale(scroll);

    /*=================================================
    繝ｭ繧ｴ縲√ワ繝ｳ繝舌�繧ｬ繝ｼ繝｡繝九Η繝ｼ縺ｮ陦ｨ遉ｺ
    ===================================================*/
    // 繧ｹ繧ｯ繝ｭ繝ｼ繝ｫ菴咲ｽｮ縺�520px繧定ｶ�∴縺溷�ｴ蜷�
    if (scroll > 520) {
      // 繝ｭ繧ｴ縺ｨ繝上Φ繝舌�繧ｬ窶輔Γ繝九Η繧断adeIn縺ｧ陦ｨ遉ｺ縺吶ｋ
      $('.logo').fadeIn(500);
      $('.hamburger').fadeIn(500);
    // 繧ｹ繧ｯ繝ｭ繝ｼ繝ｫ菴咲ｽｮ縺�520px譛ｪ貅縺ｮ蝣ｴ蜷�
    } else {
      // 繝ｭ繧ｴ縺ｨ繝上Φ繝舌�繧ｬ窶輔Γ繝九Η繧断adeOut縺ｧ髱櫁｡ｨ遉ｺ縺ｫ縺吶ｋ
      $('.logo').fadeOut(500);
      $('.hamburger').fadeOut(500);
    }

    /*=================================================
    繧ｵ繧､繝峨�繧ｿ繝ｳ繧定｡ｨ遉ｺ
    ===================================================*/
    // 逕ｻ髱｢荳九°繧�#gallery縺ｾ縺ｧ縺ｮ霍晞屬繧貞叙蠕�
    let gallery_position = $('#gallery').offset().top - $(window).height();
    // 逕ｻ髱｢荳九°繧�#access縺ｾ縺ｧ縺ｮ霍晞屬繧貞叙蠕�
    let access_position = $('#access').offset().top - $(window).height();

    // window.innerWidth縺ｧ逕ｻ髱｢蟷�ｒ蜿門ｾ�
    // PC陦ｨ遉ｺ縺ｮ蝣ｴ蜷医�蜃ｦ逅�ｼ育判髱｢蟷�′900px繧医ｊ螟ｧ縺阪＞蝣ｴ蜷医窶ｻ900px縺ｯCSS縺ｮ繝悶Ξ繝ｼ繧ｯ繝昴う繝ｳ繝医→縺ゅｏ縺帙ｋ��
    if (window.innerWidth > 900) {
      // #gallery縺瑚｡ｨ遉ｺ縺輔ｌ縺溷�ｴ蜷茨ｼ医せ繧ｯ繝ｭ繝ｼ繝ｫ菴咲ｽｮ縺後∫判髱｢荳九°繧�#gallery縺ｾ縺ｧ縺ｮ霍晞屬繧定ｶ�∴縺溷�ｴ蜷茨ｼ�
      if(scroll > gallery_position){
        // #access縺瑚｡ｨ遉ｺ縺輔ｌ繧九∪縺ｧ縺ｮ髢薙�縲�#side-btn繧呈ｨｪ縺九ｉ繧ｹ繝ｩ繧､繝峨＆縺帙※陦ｨ遉ｺ縺吶ｋ
        if(scroll < access_position){
          $('#side-btn').css({
            'transform': 'rotate(-90deg) translateY(0)'
          });
        // #access縺瑚｡ｨ遉ｺ縺輔ｌ縺溘ｉ縲�#side-btn繧偵せ繝ｩ繧､繝峨＆縺帙※髱櫁｡ｨ遉ｺ縺ｫ縺吶ｋ
        } else {
          $('#side-btn').css({
            'transform': 'rotate(-90deg) translateY(60px)'
          });
        }
      // #gallery縺瑚｡ｨ遉ｺ縺輔ｌ繧句燕縺ｯ縲�#side-btn繧偵せ繝ｩ繧､繝峨＆縺帙※髱櫁｡ｨ遉ｺ縺ｫ縺吶ｋ
      } else {
        $('#side-btn').css({
          'transform': 'rotate(-90deg) translateY(60px)'
        });
      }
    }

    /*=================================================
    Access縺ｮ閭梧勹逕ｻ蜒上ｒ陦ｨ遉ｺ
    ===================================================*/
    // 逕ｻ髱｢荳九°繧�#contact縺ｾ縺ｧ縺ｮ霍晞屬繧貞叙蠕�
    let contact_position = $('#contact').offset().top - $(window).height();

    // #access縺瑚｡ｨ遉ｺ縺輔ｌ縺溷�ｴ蜷�
    if(scroll > access_position){
      // #contact縺瑚｡ｨ遉ｺ縺輔ｌ繧九∪縺ｧ縺ｮ髢薙�縲∬レ譎ｯ逕ｻ蜒上ｒfadeIn縺ｧ陦ｨ遉ｺ縺吶ｋ
      if(scroll < contact_position){
        $('.bg').fadeIn(500);
      } else {
        $('.bg').fadeOut(500);
      }
    // #access縺瑚｡ｨ遉ｺ縺輔ｌ繧句燕縺ｮ蝣ｴ蜷�
    } else {
      // 閭梧勹逕ｻ蜒上ｒ陦ｨ遉ｺ縺励↑縺�
      $('.bg').fadeOut(500);
    }
  });

  /*=================================================
  逕ｻ髱｢隱ｭ縺ｿ霎ｼ縺ｿ譎ゅ→逕ｻ髱｢蟷�､画峩譎ゅ�繧､繝吶Φ繝�
  ===================================================*/
  $(window).on('load resize', function() {
    // 繧ｹ繧ｯ繝ｭ繝ｼ繝ｫ菴咲ｽｮ繧貞叙蠕�
    let scroll = $(window).scrollTop();

    /*=================================================
    繝｡繧､繝ｳ繝薙ず繝･繧｢繝ｫ縺ｮ諡｡螟ｧ繝ｻ邵ｮ蟆�
    ===================================================*/
    mv_scale(scroll);
  });
});

/*=================================================
繝上Φ繝舌�繧ｬ窶輔Γ繝九Η繝ｼ�亥�騾壼�逅�ｼ�
===================================================*/
// 繝上Φ繝舌�繧ｬ繝ｼ繝｡繝九Η繝ｼ繧偵け繝ｪ繝�け縺励◆譎ゅ→繝｡繝九Η繝ｼ蜀��繝ｪ繝ｳ繧ｯ繧偵け繝ｪ繝�け縺励◆譎ゅ�
// 蜃ｦ逅�′蜷後§縺ｪ縺ｮ縺ｧ蜃ｦ逅�ｒ蜈ｱ騾壼喧縺吶ｋ
function hamburger() {
  // toggleClass繧剃ｽｿ逕ｨ縺吶ｋ縺薙→縺ｧ縲”amburger繧ｯ繝ｩ繧ｹ縺ｫactive繧ｯ繝ｩ繧ｹ縺悟ｭ伜惠縺吶ｋ蝣ｴ蜷医�蜑企勁縲�
  // 蟄伜惠縺励↑縺��ｴ蜷医ｒ霑ｽ蜉�縺吶ｋ蜃ｦ逅�ｒ閾ｪ蜍輔〒陦後▲縺ｦ縺上ｌ繧�
  $('.hamburger').toggleClass('active');

  if ($('.hamburger').hasClass('active')) {
    // hamburger繧ｯ繝ｩ繧ｹ縺ｫactive繧ｯ繝ｩ繧ｹ縺悟ｭ伜惠縺吶ｋ蝣ｴ蜷医�縲］avi縺ｫ繧Ｂctive繧ｯ繝ｩ繧ｹ繧定ｿｽ蜉�縺吶ｋ
    $('#navi').addClass('active');
  } else {
    // hamburger繧ｯ繝ｩ繧ｹ縺ｫactive繧ｯ繝ｩ繧ｹ縺悟ｭ伜惠縺励↑縺��ｴ蜷医�縲］avi縺九ｉactive繧ｯ繝ｩ繧ｹ繧貞炎髯､縺吶ｋ
    $('#navi').removeClass('active');
  }
}

/*=================================================
繝｡繧､繝ｳ繝薙ず繝･繧｢繝ｫ縺ｮ諡｡螟ｧ繝ｻ邵ｮ蟆擾ｼ亥�騾壼�逅�ｼ�
===================================================*/
function mv_scale(scroll) {
  // window.innerWidth縺ｧ逕ｻ髱｢蟷�ｒ蜿門ｾ�
  // PC陦ｨ遉ｺ縺ｮ蝣ｴ蜷医�蜃ｦ逅�ｼ育判髱｢蟷�′900px繧医ｊ螟ｧ縺阪＞蝣ｴ蜷医窶ｻ900px縺ｯCSS縺ｮ繝悶Ξ繝ｼ繧ｯ繝昴う繝ｳ繝医→縺ゅｏ縺帙ｋ��
  if (window.innerWidth > 900) {
    // 繝｡繧､繝ｳ繝薙ず繝･繧｢繝ｫ縺ｮCSS��width�峨ｒ螟画峩縺吶ｋ
    // width縺ｮ蛟､繧偵せ繧ｯ繝ｭ繝ｼ繝ｫ驥上↓縺ゅｏ縺帙※蠅励ｄ縺吶％縺ｨ縺ｧ逕ｻ蜒上ｒ諡｡螟ｧ縺輔○繧�
    $('#mainvisual img').css({
      'width': 100/3 + scroll/10  + '%'
    });
  // 繧ｹ繝槭�陦ｨ遉ｺ縺ｮ蝣ｴ蜷医�蜃ｦ逅�ｼ育判髱｢蟷�′900px莉･荳九�蝣ｴ蜷茨ｼ�
  } else {
    // 繝｡繧､繝ｳ繝薙ず繝･繧｢繝ｫ縺ｮCSS��width�峨ｒ螟画峩縺吶ｋ
    // width縺ｮ蛟､繧偵せ繧ｯ繝ｭ繝ｼ繝ｫ驥上↓縺ゅｏ縺帙※貂帙ｉ縺吶％縺ｨ縺ｧ逕ｻ蜒上ｒ邵ｮ蟆上＆縺帙ｋ
    $('#mainvisual img').css({
      'width': 100 - scroll/10  + '%'
    });
  }
}